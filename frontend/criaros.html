<<<<<<< HEAD
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Criar OS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body class="bg-light">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand fw-bold" href="dashboard.html">Sistema de OS</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu"
        aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarMenu">
        <ul class="navbar-nav ms-auto gap-3">
          <li class="nav-item">
            <a class="btn btn-outline-light" href="criaros.html">Criar OS</a>
          </li>
          <li class="nav-item">
            <a class="btn btn-outline-light" href="editaros.html">Lista de OS</a>
          </li>
          <li class="nav-item">
            <a class="btn btn-outline-light" href="concluiros.html">Concluir OS</a>
          </li>
          <li class="nav-item">
            <a class="btn btn-outline-light" href="usuarios.html">Usuários</a>
          </li>
          <li class="nav-item">
            <button class="btn btn-outline-light" onclick="logout()">Sair</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Formulário -->
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <div class="card shadow rounded-4">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Criar Ordem de Serviço</h4>
          </div>
          <div class="card-body">
            <form id="createOsForm">
              <div class="mb-3">
                <label for="cliente" class="form-label">Cliente</label>
                <input type="text" class="form-control" id="cliente" required>
              </div>
              <div class="mb-3">
                <label for="titulo" class="form-label">Título</label>
                <input type="text" class="form-control" id="titulo" required>
              </div>
              <div class="mb-3">
                <label for="descricao" class="form-label">Descrição</label>
                <textarea class="form-control" id="descricao" rows="4" required></textarea>
              </div>
              <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-success">Criar OS</button>
                <a href="dashboard.html" class="btn btn-secondary">Cancelar</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    const token = localStorage.getItem('token');
    if (!token) {
      window.location.href = 'index.html'; // redireciona se não estiver logado
    }

    document.getElementById('createOsForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const cliente = document.getElementById('cliente').value.trim();
      const titulo = document.getElementById('titulo').value.trim();
      const descricao = document.getElementById('descricao').value.trim();

      try {
        const res = await fetch('http://localhost:8000/os/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            Authorization: `Bearer ${token}`
          },
          body: JSON.stringify({ cliente, titulo, descricao })
        });

        if (res.ok) {
          alert('OS criada com sucesso!');
          window.location.href = 'dashboard.html';
        } else {
          const errorText = await res.text();
          alert(`Erro ao criar OS: ${res.status}\n${errorText}`);
        }
      } catch (err) {
        alert('Erro na requisição: ' + err.message);
      }
    });

    function logout() {
      localStorage.removeItem('token'); // remove o token
      window.location.href = 'index.html'; // redireciona para a tela de login
    }
  </script>

</body>

</html>
=======
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Criar OS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body class="bg-light">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">Sistema de OS</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu"
        aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarMenu">
        <ul class="navbar-nav ms-auto gap-3">
          <li class="nav-item">
            <a class="btn btn-outline-light" href="criaros.html">Criar OS</a>
          </li>
          <li class="nav-item">
            <a class="btn btn-outline-light" href="editaros.html">Lista de OS</a>
          </li>
          <li class="nav-item">
            <a class="btn btn-outline-light" href="concluiros.html">Concluir OS</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Formulário -->
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <div class="card shadow rounded-4">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Criar Ordem de Serviço</h4>
          </div>
          <div class="card-body">
            <form id="createOsForm">
              <div class="mb-3">
                <label for="cliente" class="form-label">Cliente</label>
                <input type="text" class="form-control" id="cliente" required>
              </div>
              <div class="mb-3">
                <label for="titulo" class="form-label">Título</label>
                <input type="text" class="form-control" id="titulo" required>
              </div>
              <div class="mb-3">
                <label for="descricao" class="form-label">Descrição</label>
                <textarea class="form-control" id="descricao" rows="4" required></textarea>
              </div>
              <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-success">Criar OS</button>
                <a href="dashboard.html" class="btn btn-secondary">Cancelar</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    const token = localStorage.getItem('token');
    if (!token) {
      window.location.href = 'index.html'; // redireciona se não estiver logado
    }

    document.getElementById('createOsForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const cliente = document.getElementById('cliente').value.trim();
      const titulo = document.getElementById('titulo').value.trim();
      const descricao = document.getElementById('descricao').value.trim();

      try {
        const res = await fetch('http://localhost:8000/os/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            Authorization: `Bearer ${token}`
          },
          body: JSON.stringify({ cliente, titulo, descricao })
        });

        if (res.ok) {
          alert('OS criada com sucesso!');
          window.location.href = 'dashboard.html';
        } else {
          const errorText = await res.text();
          alert(`Erro ao criar OS: ${res.status}\n${errorText}`);
        }
      } catch (err) {
        alert('Erro na requisição: ' + err.message);
      }
    });
  </script>

</body>

</html>
>>>>>>> 7aa40aef4494672cb879af888470b67d4bdd8a73
